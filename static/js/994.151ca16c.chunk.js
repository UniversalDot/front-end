"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[994],{81994:(e,a,t)=>{t.r(a),t.d(a,{default:()=>_});var i=t(72791),n=t(26445),s=t(98530),l=t(36151),d=t(65661),o=t(58561),c=t(23744),r=t(5915),b=t(7055),m=t(53451),f=t(54737),u=t(46865),g=t(314),E=t(23071),O=t(46523),p=t(98246),T=t(80184);const k=[{id:"name",label:"Name",align:"left"},{id:"owner",label:"Owner",align:"left"},{id:"actions"},{id:"expandRow"}],A=[{id:"name",label:"Name",align:"left"},{id:"actions"}],S=[{id:"name",label:"Name",align:"left"},{id:"specification",label:"Specification",align:"left"},{id:"budget",label:"Budget",align:"left"},{id:"deadline",label:"Deadline",align:"left"},{id:"attachments",label:"Attachments",align:"left"},{id:"keywords",label:"Keywords",align:"left"},{id:"status",label:"Status",align:"left"},{id:"actions"}],h={title:"",specification:"",budget:"",deadline:"",attachments:"",keywords:""},R={organizationId:"",taskId:""},j={feedback:""},x=["All"];function _(e){let{subPage:a}=e;const{themeStretch:t}=(0,o.Z)(),{enqueueSnackbar:_}=(0,p.Ds)(),{currentTab:y}=(0,c.Z)("All"),{taskAction:z}=(0,r.Xi)(),[D,I]=(0,i.useState)(""),[w,C]=(0,i.useState)([]),[M,v]=(0,i.useState)([]),[N,Z]=(0,i.useState)([]),[P,G]=(0,i.useState)([]),[K,F]=(0,i.useState)(!1),[H,U]=(0,i.useState)("createTask"),[B,V]=(0,i.useState)(""),[L,W]=(0,i.useState)(""),[q,J]=(0,i.useState)(h),[X]=(0,i.useState)(R),[Q]=(0,i.useState)(j),{selectedKeyring:Y}=(0,r.aF)(),{getOwnOrganizations:$,ownOrganizations:ee,getMembersOfAnOrganization:ae,membersOfTheSelectedOrganization:te,daoAction:ie,getOrganizationTasks:ne,organizationTasks:se}=(0,r.Wy)();(0,i.useEffect)((()=>{Y.value&&$(Y.value)}),[Y.value,$]),(0,i.useEffect)((()=>{if(ee){const e=ee.map((e=>e.name));C(e);const a=ee.map((e=>({id:e.id,name:e.name,owner:e.owner,expandedContent:{organizationId:e.id,description:e.description,vision:e.vision,createdAt:e.createdTime,lastUpdatedAt:e.lastUpdated,daoActions:[{id:O.Ef.ADD_MEMBERS,label:"Add members",cb:()=>ie(O.Ef.ADD_MEMBERS,"@TODO payload",_)}]},daoActions:[{id:O.Ef.DISSOLVE_ORGANIZATION,label:"Dissolve organization",cb:()=>ie(O.Ef.DISSOLVE_ORGANIZATION,"@TODO payload",_)},{id:O.Ef.UPDATE_ORGANIZATION,label:"Update organization",cb:()=>ie(O.Ef.UPDATE_ORGANIZATION,"@TODO payload",_)},{id:O.Ef.TRANSFER_OWNERSHIP,label:"Transfer ownership",cb:()=>ie(O.Ef.TRANSFER_OWNERSHIP,"@TODO payload",_)}]})));Z(a)}}),[ee]),(0,i.useEffect)((()=>{if(te){const e=te.map((e=>({name:e.name,daoActions:[{id:O.Ef.REMOVE_MEMBERS,label:"Remove member",cb:()=>ie(O.Ef.REMOVE_MEMBERS,"@TODO payload",_)}]})));v(e)}}),[te]),(0,i.useEffect)((()=>{if(se){const e=se.map((e=>({name:e.title,specification:e.specification,budget:e.budget,deadline:e.deadline,attachments:e.attachments,keywords:e.keywords,status:e.status,daoActions:[{id:O.Ef.REMOVE_TASKS,label:"Remove task",cb:()=>ie(O.Ef.REMOVE_TASKS,[e.organizationId,e.id],_)},{id:O.Gz.UPDATE_TASK,label:"Update task",cb:()=>{F(!0),U("updateTask"),V(e.id),J({title:e.title,specification:e.specification,budget:e.budget.replaceAll(",",""),deadline:e.deadline.replaceAll(",",""),attachments:e.attachments,keywords:e.keywords})}},{id:O.Gz.ACCEPT_TASK,label:"Accept task",cb:()=>z(O.Gz.ACCEPT_TASK,[e.id],_),isHidden:e.status!==O.H3.COMPLETED},{id:O.Gz.REJECT_TASK,label:"Reject task",cb:()=>{F(!0),U("rejectFeedback")},isHidden:e.status!==O.H3.COMPLETED}]})));G(e)}}),[se]);const le=(e,a)=>{I(e.target.value);const t=ee.find((a=>a.name===e.target.value)).id;t&&("members"===a&&ae(t,O.Ef.MEMBERS,_),"tasks"===a&&ne(t,O.Ef.ORGANIZATION_TASKS,_))},de=(e,a)=>{console.log("not needed tab switch")};return(0,T.jsx)(m.Z,{title:"My organization",children:(0,T.jsxs)(n.Z,{maxWidth:!t&&"xl",children:[(0,T.jsx)(f.Z,{heading:"DAO",links:[{name:"Organization",href:b.r.dao.root},{name:"My organization"},{name:a}]}),w&&"members"===a&&(0,T.jsx)(E.Ph,{options:w,selectedOption:D,onOptionSelect:e=>le(e,"members")}),w&&"tasks"===a&&(0,T.jsxs)(s.Z,{display:"flex",alignItems:"center",width:"100%",children:[(0,T.jsx)(E.Ph,{options:w,selectedOption:D,onOptionSelect:e=>le(e,"tasks")}),(0,T.jsx)(l.Z,{variant:"contained",startIcon:(0,T.jsx)(u.Z,{icon:"eva:plus-fill"}),onClick:()=>{F(!0),U("addToOrg")},style:{marginRight:"1rem"},children:"Add task to organization"}),(0,T.jsx)(l.Z,{variant:"contained",startIcon:(0,T.jsx)(u.Z,{icon:"eva:plus-fill"}),onClick:()=>{F(!0),U("createTask")},children:"Create task"})]}),"tasks"===a&&(0,T.jsx)(E.AO,{listType:"myOrganization",tabs:x,currentTab:y,onTabSwitch:de,listHead:S,listData:P,daoSubpage:a}),"members"===a&&(0,T.jsx)(E.AO,{listType:"myOrganization",tabs:x,currentTab:y,onTabSwitch:de,listHead:A,listData:M,daoSubpage:a}),"organizations"===a&&(0,T.jsx)(E.AO,{listType:"myOrganization",tabs:x,currentTab:y,onTabSwitch:de,listHead:k,listData:N,daoSubpage:a}),(0,T.jsxs)(g.Kl,{open:K,onClose:()=>F(!1),children:[(0,T.jsx)(d.Z,{children:"createTask"===H?"Create task":"updateTask"===H?"Update task":"rejectFeedback"===H?"Rejection feedback":"Add task to organization"}),(0,T.jsxs)(s.Z,{p:"1.5rem",children:["createTask"===H&&(0,T.jsx)(E.GA,{taskForm:q||{},onCancel:()=>(F(!1),void J(h))}),"updateTask"===H&&(0,T.jsx)(E.GA,{taskForm:q||{},taskIdForEdit:B,onCancel:()=>(F(!1),U("createTask"),V(""),void J(h))}),"addToOrg"===H&&(0,T.jsx)(E.gU,{form:X||{},onCancel:()=>{F(!1)}}),"rejectFeedback"===H&&(0,T.jsx)(E.nk,{form:Q||{},onCancel:()=>(F(!1),void W("")),taskId:L})]})]})]})})}}}]);
//# sourceMappingURL=994.151ca16c.chunk.js.map