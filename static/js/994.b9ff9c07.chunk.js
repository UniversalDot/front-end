"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[994],{81994:(e,a,t)=>{t.r(a),t.d(a,{default:()=>I});var i=t(72791),n=t(26445),s=t(64554),o=t(36151),d=t(65661),l=t(58561),r=t(23744),c=t(5915),m=t(7055),g=t(53451),f=t(54737),b=t(46865),u=t(314),p=t(43067),O=t(46523),k=t(98246),E=t(80184);const S=[{id:"name",label:"Name",align:"left"},{id:"owner",label:"Owner",align:"left"},{id:"actions"},{id:"expandRow"}],A=[{id:"name",label:"Name",align:"left"},{id:"actions"}],T=[{id:"name",label:"Name",align:"left"},{id:"specification",label:"Specification",align:"left"},{id:"budget",label:"Budget",align:"left"},{id:"deadline",label:"Deadline",align:"left"},{id:"attachments",label:"Attachments",align:"left"},{id:"keywords",label:"Keywords",align:"left"},{id:"status",label:"Status",align:"left"},{id:"actions"}],h={title:"",specification:"",budget:"",deadline:"",attachments:"",keywords:""},z={organizationId:"",taskId:""},x={feedback:""},j={name:"",description:"",vision:""},w={newOwnerId:""},C=["All"];function I(e){let{subPage:a}=e;const{themeStretch:t}=(0,l.Z)(),{enqueueSnackbar:I}=(0,k.Ds)(),{currentTab:R}=(0,r.Z)("All"),{taskAction:v}=(0,c.Xi)(),[y,_]=(0,i.useState)(""),[Z,M]=(0,i.useState)([]),[D,N]=(0,i.useState)([]),[G,K]=(0,i.useState)([]),[P,U]=(0,i.useState)([]),[F,H]=(0,i.useState)(!1),[B,V]=(0,i.useState)("createTask"),[L,W]=(0,i.useState)(""),[q,J]=(0,i.useState)(""),[X,Q]=(0,i.useState)(h),[Y]=(0,i.useState)(z),[$]=(0,i.useState)(x),[ee,ae]=(0,i.useState)(j),[te]=(0,i.useState)(w),[ie,ne]=(0,i.useState)(""),{selectedKeyring:se}=(0,c.aF)(),{getOwnOrganizations:oe,ownOrganizations:de,getMembersOfAnOrganization:le,membersOfTheSelectedOrganization:re,daoAction:ce,getOrganizationTasks:me,organizationTasks:ge}=(0,c.Wy)();(0,i.useEffect)((()=>{se.value&&oe(se.value)}),[se.value,oe]),(0,i.useEffect)((()=>{if(de){const e=de.map((e=>e.name));M(e);const a=de.map((e=>({id:e.id,name:e.name,owner:e.owner,expandedContent:{organizationId:e.id,description:e.description,vision:e.vision,createdAt:e.createdTime,lastUpdatedAt:e.lastUpdated,daoActions:[{id:O.Ef.ADD_MEMBERS,label:"Add members",cb:()=>ce(O.Ef.ADD_MEMBERS,"@TODO payload",I)}]},daoActions:[{id:O.Ef.DISSOLVE_ORGANIZATION,label:"Dissolve organization",cb:()=>ce(O.Ef.DISSOLVE_ORGANIZATION,e.id,I)},{id:O.Ef.UPDATE_ORGANIZATION,label:"Update organization",cb:()=>{H(!0),V("updateOrganization"),ne(e.id),ae({name:e.name,description:e.description,vision:e.vision})}},{id:O.Ef.TRANSFER_OWNERSHIP,label:"Transfer ownership",cb:()=>{H(!0),ne(e.id),V("transferOwnershipOrganization")}}]})));K(a)}}),[de]),(0,i.useEffect)((()=>{if(re&&ie){const e=re.map((e=>({name:e.name,daoActions:[{id:O.Ef.REMOVE_MEMBERS,label:"Remove member",cb:()=>ce(O.Ef.REMOVE_MEMBERS,[ie,e.owner],I)}]})));N(e)}}),[re,ie]),(0,i.useEffect)((()=>{if(ge){const e=ge.map((e=>({name:e.title,specification:e.specification,budget:e.budget,deadline:e.deadline,attachments:e.attachments,keywords:e.keywords,status:e.status,daoActions:[{id:O.Ef.REMOVE_TASKS,label:"Remove task",cb:()=>ce(O.Ef.REMOVE_TASKS,[e.organizationId,e.id],I)},{id:O.Gz.UPDATE_TASK,label:"Update task",cb:()=>{H(!0),V("updateTask"),W(e.id),Q({title:e.title,specification:e.specification,budget:e.budget.replaceAll(",",""),deadline:e.deadline.replaceAll(",",""),attachments:e.attachments,keywords:e.keywords})}},{id:O.Gz.ACCEPT_TASK,label:"Accept task",cb:()=>v(O.Gz.ACCEPT_TASK,[e.id],I),isHidden:e.status!==O.H3.COMPLETED},{id:O.Gz.REJECT_TASK,label:"Reject task",cb:()=>{H(!0),V("rejectFeedback")},isHidden:e.status!==O.H3.COMPLETED}]})));U(e)}}),[ge]);const fe=(e,a)=>{_(e.target.value);const t=de.find((a=>a.name===e.target.value)).id;ne(t),t&&("members"===a&&le(t,O.Ef.MEMBERS,I),"tasks"===a&&me(t,O.Ef.ORGANIZATION_TASKS,I))},be=(e,a)=>{console.log("not needed tab switch")},ue=()=>{H(!1),ne("")};return(0,E.jsx)(g.Z,{title:"My organization",children:(0,E.jsxs)(n.Z,{maxWidth:!t&&"xl",children:[(0,E.jsx)(f.Z,{heading:"DAO",links:[{name:"Organization",href:m.r.dao.root},{name:"My organization"},{name:a}]}),Z&&"members"===a&&(0,E.jsx)(p.Ph,{options:Z,selectedOption:y,onOptionSelect:e=>fe(e,"members")}),Z&&"tasks"===a&&(0,E.jsxs)(s.Z,{display:"flex",alignItems:"center",width:"100%",children:[(0,E.jsx)(p.Ph,{options:Z,selectedOption:y,onOptionSelect:e=>fe(e,"tasks")}),(0,E.jsx)(o.Z,{variant:"contained",startIcon:(0,E.jsx)(b.Z,{icon:"eva:plus-fill"}),onClick:()=>{H(!0),V("addToOrg")},style:{marginRight:"1rem"},children:"Add task to organization"}),(0,E.jsx)(o.Z,{variant:"contained",startIcon:(0,E.jsx)(b.Z,{icon:"eva:plus-fill"}),onClick:()=>{H(!0),V("createTask")},children:"Create task"})]}),"tasks"===a&&(0,E.jsx)(p.AO,{listType:"myOrganization",tabs:C,currentTab:R,onTabSwitch:be,listHead:T,listData:P,daoSubpage:a}),"members"===a&&(0,E.jsx)(p.AO,{listType:"myOrganization",tabs:C,currentTab:R,onTabSwitch:be,listHead:A,listData:D,daoSubpage:a}),"organizations"===a&&(0,E.jsxs)(s.Z,{children:[(0,E.jsxs)(s.Z,{mb:"2rem",display:"flex",justifyContent:"flex-end",children:[" ",(0,E.jsx)(o.Z,{variant:"contained",startIcon:(0,E.jsx)(b.Z,{icon:"eva:plus-fill"}),onClick:()=>{H(!0),V("createOrganization")},style:{marginRight:"1rem"},children:"Create organization"})]}),(0,E.jsx)(p.AO,{listType:"myOrganization",tabs:C,currentTab:R,onTabSwitch:be,listHead:S,listData:G,daoSubpage:a})]}),(0,E.jsxs)(u.Kl,{open:F,onClose:()=>H(!1),children:[(0,E.jsx)(d.Z,{children:"createTask"===B?"Create task":"updateTask"===B?"Update task":"rejectFeedback"===B?"Rejection feedback":"createOrganization"===B?"Create organization":"updateOrganization"===B?"Update organization":"transferOwnershipOrganization"===B?"Transfer ownership of organization":"Add task to organization"}),(0,E.jsxs)(s.Z,{p:"1.5rem",children:["createTask"===B&&(0,E.jsx)(p.GA,{taskForm:X||{},onCancel:()=>(H(!1),void Q(h))}),"updateTask"===B&&(0,E.jsx)(p.GA,{taskForm:X||{},taskIdForEdit:L,onCancel:()=>(H(!1),V("createTask"),W(""),void Q(h))}),"addToOrg"===B&&(0,E.jsx)(p.gU,{form:Y||{},onCancel:()=>{H(!1)}}),"rejectFeedback"===B&&(0,E.jsx)(p.nk,{form:$||{},onCancel:()=>(H(!1),void J("")),taskId:q}),"createOrganization"===B&&(0,E.jsx)(p.n4,{form:ee||{},onCancel:()=>ue()}),"updateOrganization"===B&&(0,E.jsx)(p.n4,{form:ee||{},onCancel:()=>ue(),organizationId:ie}),"transferOwnershipOrganization"===B&&(0,E.jsx)(p.Ok,{form:te||{},onCancel:()=>ue(),organizationId:ie})]})]})]})})}}}]);
//# sourceMappingURL=994.b9ff9c07.chunk.js.map