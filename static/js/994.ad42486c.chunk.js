"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[994],{81994:(e,a,t)=>{t.r(a),t.d(a,{default:()=>I});var i=t(72791),n=t(26445),s=t(64554),o=t(36151),l=t(65661),d=t(58561),r=t(23744),c=t(5915),b=t(7055),m=t(53451),g=t(54737),f=t(46865),u=t(314),p=t(43067),O=t(46523),k=t(98246),S=t(80184);const E=[{id:"name",label:"Name",align:"left"},{id:"owner",label:"Owner",align:"left"},{id:"actions"},{id:"expandRow"}],A=[{id:"name",label:"Name",align:"left"},{id:"actions"}],T=[{id:"name",label:"Name",align:"left"},{id:"specification",label:"Specification",align:"left"},{id:"budget",label:"Budget",align:"left"},{id:"deadline",label:"Deadline",align:"left"},{id:"attachments",label:"Attachments",align:"left"},{id:"keywords",label:"Keywords",align:"left"},{id:"status",label:"Status",align:"left"},{id:"actions"}],h={title:"",specification:"",budget:"",deadline:"",attachments:"",keywords:""},z={organizationId:"",taskId:""},x={feedback:""},C={name:"",description:"",vision:""},j={newOwnerId:""},w=["All"];function I(e){let{subPage:a}=e;const{themeStretch:t}=(0,d.Z)(),{enqueueSnackbar:I}=(0,k.Ds)(),{currentTab:R}=(0,r.Z)("All"),{taskAction:v}=(0,c.Xi)(),[y,_]=(0,i.useState)(""),[Z,D]=(0,i.useState)([]),[M,N]=(0,i.useState)([]),[K,G]=(0,i.useState)([]),[P,U]=(0,i.useState)([]),[F,H]=(0,i.useState)(!1),[B,V]=(0,i.useState)("createTask"),[L,W]=(0,i.useState)(""),[q,J]=(0,i.useState)(""),[X,Q]=(0,i.useState)(h),[Y]=(0,i.useState)(z),[$]=(0,i.useState)(x),[ee,ae]=(0,i.useState)(C),[te]=(0,i.useState)(j),[ie,ne]=(0,i.useState)(""),{selectedKeyring:se}=(0,c.aF)(),{getOwnOrganizations:oe,ownOrganizations:le,getMembersOfAnOrganization:de,membersOfTheSelectedOrganization:re,daoAction:ce,getOrganizationTasks:be,organizationTasks:me}=(0,c.Wy)();(0,i.useEffect)((()=>{se.value&&oe(se.value)}),[se.value,oe]),(0,i.useEffect)((()=>{if(le){const e=le.map((e=>e.name));D(e);const a=le.map((e=>({id:e.id,name:e.name,owner:e.owner,expandedContent:{organizationId:e.id,description:e.description,vision:e.vision,createdAt:e.createdTime,lastUpdatedAt:e.lastUpdated,daoActions:[{id:O.Ef.ADD_MEMBERS,label:"Add members",cb:()=>ce(O.Ef.ADD_MEMBERS,"@TODO payload",I)}]},daoActions:[{id:O.Ef.DISSOLVE_ORGANIZATION,label:"Dissolve organization",cb:()=>ce(O.Ef.DISSOLVE_ORGANIZATION,e.id,I)},{id:O.Ef.UPDATE_ORGANIZATION,label:"Update organization",cb:()=>{H(!0),V("updateOrganization"),ne(e.id),ae({name:e.name,description:e.description,vision:e.vision})}},{id:O.Ef.TRANSFER_OWNERSHIP,label:"Transfer ownership",cb:()=>{H(!0),ne(e.id),V("transferOwnershipOrganization")}}]})));G(a)}}),[le]),(0,i.useEffect)((()=>{if(re&&ie){const e=re.map((e=>({name:e.name,daoActions:[{id:O.Ef.REMOVE_MEMBERS,label:"Remove member",cb:()=>ce(O.Ef.REMOVE_MEMBERS,[ie,e.owner],I)}]})));N(e)}}),[re,ie]),(0,i.useEffect)((()=>{if(me){const e=me.map((e=>({name:e.title,specification:e.specification,budget:e.budget,deadline:e.deadline,attachments:e.attachments,keywords:e.keywords,status:e.status,daoActions:[{id:O.Ef.REMOVE_TASKS,label:"Remove task",cb:()=>ce(O.Ef.REMOVE_TASKS,[e.organizationId,e.id],I)},{id:O.Gz.UPDATE_TASK,label:"Update task",cb:()=>{H(!0),V("updateTask"),W(e.id),Q({title:e.title,specification:e.specification,budget:e.budget.replaceAll(",",""),deadline:e.deadline.replaceAll(",",""),attachments:e.attachments,keywords:e.keywords})}},{id:O.Gz.ACCEPT_TASK,label:"Accept task",cb:()=>v(O.Gz.ACCEPT_TASK,[e.id],I),isHidden:e.status!==O.H3.COMPLETED},{id:O.Gz.REJECT_TASK,label:"Reject task",cb:()=>{H(!0),V("rejectFeedback")},isHidden:e.status!==O.H3.COMPLETED}]})));U(e)}}),[me]);const ge=(e,a)=>{_(e.target.value);const t=le.find((a=>a.name===e.target.value)).id;ne(t),t&&("members"===a&&de(t,O.Ef.MEMBERS,I),"tasks"===a&&be(t,O.Ef.ORGANIZATION_TASKS,I))},fe=(e,a)=>{console.log("not needed tab switch")},ue=()=>{H(!1),ne("")},pe=(0,i.useCallback)(((e,a,t)=>{e===O.xl.DAO&&ce(a,t,I),e===O.xl.TASK&&v(a,t,I)}),[]);return(0,S.jsx)(m.Z,{title:"My organization",children:(0,S.jsxs)(n.Z,{maxWidth:!t&&"xl",children:[(0,S.jsx)(g.Z,{heading:"DAO",links:[{name:"Organization",href:b.r.dao.root},{name:"My organization"},{name:a}]}),Z&&"members"===a&&(0,S.jsx)(p.Ph,{options:Z,selectedOption:y,onOptionSelect:e=>ge(e,"members")}),Z&&"tasks"===a&&(0,S.jsxs)(s.Z,{display:"flex",alignItems:"center",width:"100%",children:[(0,S.jsx)(p.Ph,{options:Z,selectedOption:y,onOptionSelect:e=>ge(e,"tasks")}),(0,S.jsx)(o.Z,{variant:"contained",startIcon:(0,S.jsx)(f.Z,{icon:"eva:plus-fill"}),onClick:()=>{H(!0),V("addToOrg")},style:{marginRight:"1rem"},children:"Add task to organization"}),(0,S.jsx)(o.Z,{variant:"contained",startIcon:(0,S.jsx)(f.Z,{icon:"eva:plus-fill"}),onClick:()=>{H(!0),V("createTask")},children:"Create task"})]}),"tasks"===a&&(0,S.jsx)(p.AO,{listType:"myOrganization",tabs:w,currentTab:R,onTabSwitch:fe,listHead:T,listData:P,daoSubpage:a}),"members"===a&&(0,S.jsx)(p.AO,{listType:"myOrganization",tabs:w,currentTab:R,onTabSwitch:fe,listHead:A,listData:M,daoSubpage:a}),"organizations"===a&&(0,S.jsxs)(s.Z,{children:[(0,S.jsxs)(s.Z,{mb:"2rem",display:"flex",justifyContent:"flex-end",children:[" ",(0,S.jsx)(o.Z,{variant:"contained",startIcon:(0,S.jsx)(f.Z,{icon:"eva:plus-fill"}),onClick:()=>{H(!0),V("createOrganization")},style:{marginRight:"1rem"},children:"Create organization"})]}),(0,S.jsx)(p.AO,{listType:"myOrganization",tabs:w,currentTab:R,onTabSwitch:fe,listHead:E,listData:K,daoSubpage:a})]}),(0,S.jsxs)(u.Kl,{open:F,onClose:()=>H(!1),children:[(0,S.jsx)(l.Z,{children:"createTask"===B?"Create task":"updateTask"===B?"Update task":"rejectFeedback"===B?"Rejection feedback":"createOrganization"===B?"Create organization":"updateOrganization"===B?"Update organization":"transferOwnershipOrganization"===B?"Transfer ownership of organization":"Add task to organization"}),(0,S.jsxs)(s.Z,{p:"1.5rem",children:["createTask"===B&&(0,S.jsx)(p.GA,{taskForm:X||{},onCancel:()=>(H(!1),void Q(h)),actionCb:pe}),"updateTask"===B&&(0,S.jsx)(p.GA,{taskForm:X||{},taskIdForEdit:L,onCancel:()=>(H(!1),V("createTask"),W(""),void Q(h)),actionCb:pe}),"addToOrg"===B&&(0,S.jsx)(p.gU,{form:Y||{},onCancel:()=>{H(!1)},actionCb:pe}),"rejectFeedback"===B&&(0,S.jsx)(p.nk,{form:$||{},onCancel:()=>(H(!1),void J("")),taskId:q,actionCb:pe}),"createOrganization"===B&&(0,S.jsx)(p.n4,{form:ee||{},onCancel:()=>ue(),actionCb:pe}),"updateOrganization"===B&&(0,S.jsx)(p.n4,{form:ee||{},onCancel:()=>ue(),organizationId:ie,actionCb:pe}),"transferOwnershipOrganization"===B&&(0,S.jsx)(p.Ok,{form:te||{},onCancel:()=>ue(),organizationId:ie,actionCb:pe})]})]})]})})}}}]);
//# sourceMappingURL=994.ad42486c.chunk.js.map