"use strict";(self.webpackChunkhyres=self.webpackChunkhyres||[]).push([[994],{81994:(e,a,t)=>{t.r(a),t.d(a,{default:()=>D});var i=t(72791),n=t(26445),s=t(64554),o=t(36151),d=t(65661),l=t(58561),r=t(23744),c=t(5915),g=t(7055),b=t(53451),m=t(54737),f=t(46865),u=t(87290),p=t(57397),O=t(46523),k=t(98246),T=t(80184);const E=[{id:"name",label:"Name",align:"left"},{id:"owner",label:"Owner",align:"left"},{id:"actions"},{id:"expandRow"}],S=[{id:"name",label:"Name",align:"left"},{id:"actions"}],A=[{id:"name",label:"Name",align:"left"},{id:"specification",label:"Specification",align:"left"},{id:"budget",label:"Budget",align:"left"},{id:"deadline",label:"Deadline",align:"left"},{id:"attachments",label:"Attachments",align:"left"},{id:"keywords",label:"Keywords",align:"left"},{id:"status",label:"Status",align:"left"},{id:"actions"}],h={title:"",specification:"",budget:"",deadline:"",attachments:"",keywords:""},z={organizationId:"",taskId:""},x={feedback:""},C={name:"",description:"",vision:""},j={newOwnerId:""},w=["All"];function D(e){let{subPage:a}=e;const{themeStretch:t}=(0,l.Z)(),{enqueueSnackbar:D}=(0,k.Ds)(),{currentTab:v}=(0,r.Z)("All"),{taskAction:R}=(0,c.Xi)(),{loadingDaoAddMembers:y,loadingDaoRemoveMembers:I,loadingDaoAddTasks:M,loadingDaoRemoveTasks:Z,loadingDaoCreateOrganization:N,loadingDaoDissolveOrganization:_,loadingDaoUpdateOrganization:U,loadingDaoTransferOwnership:K,loadingTasksCreateTask:P,loadingTasksUpdateTask:F}=(0,c.U2)(),[G,H]=(0,i.useState)(""),[B,V]=(0,i.useState)([]),[L,W]=(0,i.useState)([]),[q,J]=(0,i.useState)([]),[X,Q]=(0,i.useState)([]),[Y,$]=(0,i.useState)(!1),[ee,ae]=(0,i.useState)("createTask"),[te,ie]=(0,i.useState)(""),[ne,se]=(0,i.useState)(""),[oe,de]=(0,i.useState)(h),[le]=(0,i.useState)(z),[re]=(0,i.useState)(x),[ce,ge]=(0,i.useState)(C),[be]=(0,i.useState)(j),[me,fe]=(0,i.useState)(""),{selectedKeyring:ue}=(0,c.aF)(),{getOwnOrganizations:pe,ownOrganizations:Oe,getMembersOfAnOrganization:ke,membersOfTheSelectedOrganization:Te,daoAction:Ee,getOrganizationTasks:Se,organizationTasks:Ae}=(0,c.Wy)(),he=(0,i.useMemo)((()=>y||I||M||Z||N||_||U||K),[y,I,M,Z,N,_,U,K]),ze=(0,i.useMemo)((()=>P||F),[P,F]);(0,i.useEffect)((()=>{ue.value&&pe(ue.value)}),[ue.value,pe]),(0,i.useEffect)((()=>()=>{H(""),W([]),Q([])}),[a]),(0,i.useEffect)((()=>{if(Oe){const e=Oe.map((e=>e.name));V(e);const a=Oe.map((e=>({id:e.id,name:e.name,owner:e.owner,expandedContent:{organizationId:e.id,description:e.description,vision:e.vision,createdAt:e.createdTime,lastUpdatedAt:e.lastUpdated,daoActions:[{id:O.Ef.ADD_MEMBERS,label:"Add members",cb:()=>Ee(O.Ef.ADD_MEMBERS,"@TODO payload",D)}]},daoActions:[{id:O.Ef.DISSOLVE_ORGANIZATION,label:"Dissolve organization",cb:()=>Ee(O.Ef.DISSOLVE_ORGANIZATION,e.id,D)},{id:O.Ef.UPDATE_ORGANIZATION,label:"Update organization",cb:()=>{$(!0),ae("updateOrganization"),fe(e.id),ge({name:e.name,description:e.description,vision:e.vision})}},{id:O.Ef.TRANSFER_OWNERSHIP,label:"Transfer ownership",cb:()=>{$(!0),fe(e.id),ae("transferOwnershipOrganization")}}]})));J(a)}}),[Oe]),(0,i.useEffect)((()=>{if(Te&&me){const e=Te.map((e=>({name:e.name,daoActions:[{id:O.Ef.REMOVE_MEMBERS,label:"Remove member",cb:()=>Ee(O.Ef.REMOVE_MEMBERS,[me,e.owner],D)}]})));W(e)}}),[Te,me]),(0,i.useEffect)((()=>{if(Ae){const e=Ae.map((e=>({name:e.title,specification:e.specification,budget:e.budget,deadline:e.deadline,attachments:e.attachments,keywords:e.keywords,status:e.status,daoActions:[{id:O.Ef.REMOVE_TASKS,label:"Remove task",cb:()=>Ee(O.Ef.REMOVE_TASKS,[e.organizationId,e.id],D)},{id:O.Gz.UPDATE_TASK,label:"Update task",cb:()=>{$(!0),ae("updateTask"),ie(e.id),de({title:e.title,specification:e.specification,budget:e.budget.replaceAll(",",""),deadline:e.deadline.replaceAll(",",""),attachments:e.attachments,keywords:e.keywords})}},{id:O.Gz.ACCEPT_TASK,label:"Accept task",cb:()=>R(O.Gz.ACCEPT_TASK,[e.id],D),isHidden:e.status!==O.H3.COMPLETED},{id:O.Gz.REJECT_TASK,label:"Reject task",cb:()=>{$(!0),ae("rejectFeedback")},isHidden:e.status!==O.H3.COMPLETED}]})));Q(e)}}),[Ae]);const xe=(e,a)=>{H(e.target.value);const t=Oe.find((a=>a.name===e.target.value)).id;fe(t),t&&("members"===a&&ke(t,O.Ef.MEMBERS,D),"tasks"===a&&Se(t,O.Ef.ORGANIZATION_TASKS,D))},Ce=(e,a)=>{console.log("not needed tab switch")},je=()=>{$(!1),fe("")},we=(0,i.useCallback)(((e,a,t)=>{e===O.xl.DAO&&Ee(a,t,D),e===O.xl.TASK&&R(a,t,D)}),[]);return(0,T.jsx)(b.Z,{title:"My organization",children:(0,T.jsxs)(n.Z,{maxWidth:!t&&"xl",children:[(0,T.jsx)(m.Z,{heading:"DAO",links:[{name:"Organization",href:g.r.dao.root},{name:"My organization"},{name:a}]}),B&&"members"===a&&(0,T.jsx)(p.Ph,{options:B,selectedOption:G,onOptionSelect:e=>xe(e,"members")}),B&&"tasks"===a&&(0,T.jsxs)(s.Z,{display:"flex",alignItems:"center",width:"100%",children:[(0,T.jsx)(p.Ph,{options:B,selectedOption:G,onOptionSelect:e=>xe(e,"tasks")}),(0,T.jsx)(o.Z,{variant:"contained",startIcon:(0,T.jsx)(f.Z,{icon:"eva:plus-fill"}),onClick:()=>{$(!0),ae("addToOrg")},style:{marginRight:"1rem"},children:"Add task to organization"}),(0,T.jsx)(o.Z,{variant:"contained",startIcon:(0,T.jsx)(f.Z,{icon:"eva:plus-fill"}),onClick:()=>{$(!0),ae("createTask")},children:"Create task"})]}),"tasks"===a&&(0,T.jsx)(p.AO,{listType:"myOrganization",tabs:w,currentTab:v,onTabSwitch:Ce,listHead:A,listData:X,daoSubpage:a,loading:he||ze}),"members"===a&&(0,T.jsx)(p.AO,{listType:"myOrganization",tabs:w,currentTab:v,onTabSwitch:Ce,listHead:S,listData:L,daoSubpage:a,loading:he}),"organizations"===a&&(0,T.jsxs)(s.Z,{children:[(0,T.jsxs)(s.Z,{mb:"2rem",display:"flex",justifyContent:"flex-end",children:[" ",(0,T.jsx)(o.Z,{variant:"contained",startIcon:(0,T.jsx)(f.Z,{icon:"eva:plus-fill"}),onClick:()=>{$(!0),ae("createOrganization")},style:{marginRight:"1rem"},children:"Create organization"})]}),(0,T.jsx)(p.AO,{listType:"myOrganization",tabs:w,currentTab:v,onTabSwitch:Ce,listHead:E,listData:q,daoSubpage:a,loading:he})]}),(0,T.jsxs)(u.Kl,{open:Y,onClose:()=>$(!1),children:[(0,T.jsx)(d.Z,{children:"createTask"===ee?"Create task":"updateTask"===ee?"Update task":"rejectFeedback"===ee?"Rejection feedback":"createOrganization"===ee?"Create organization":"updateOrganization"===ee?"Update organization":"transferOwnershipOrganization"===ee?"Transfer ownership of organization":"Add task to organization"}),(0,T.jsxs)(s.Z,{p:"1.5rem",children:["createTask"===ee&&(0,T.jsx)(p.No,{taskForm:oe||{},onCancel:()=>($(!1),void de(h)),actionCb:we}),"updateTask"===ee&&(0,T.jsx)(p.No,{taskForm:oe||{},taskIdForEdit:te,onCancel:()=>($(!1),ae("createTask"),ie(""),void de(h)),actionCb:we}),"addToOrg"===ee&&(0,T.jsx)(p.gU,{form:le||{},onCancel:()=>{$(!1)},actionCb:we}),"rejectFeedback"===ee&&(0,T.jsx)(p.nk,{form:re||{},onCancel:()=>($(!1),void se("")),taskId:ne,actionCb:we}),"createOrganization"===ee&&(0,T.jsx)(p.n4,{form:ce||{},onCancel:()=>je(),actionCb:we}),"updateOrganization"===ee&&(0,T.jsx)(p.n4,{form:ce||{},onCancel:()=>je(),organizationId:me,actionCb:we}),"transferOwnershipOrganization"===ee&&(0,T.jsx)(p.Ok,{form:be||{},onCancel:()=>je(),organizationId:me,actionCb:we})]})]})]})})}}}]);
//# sourceMappingURL=994.189fdef0.chunk.js.map